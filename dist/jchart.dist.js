(function(){var t=this,i={version:"0.1",animationOptions:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0==t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1==t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var i=1.70158,e=0,a=1;if(0==t)return 0;if(1==(t/=1))return 1;if(e||(e=.3),a<Math.abs(1)){a=1;var i=e/4}else var i=e/(2*Math.PI)*Math.asin(1/a);return-a*Math.pow(2,10*(t-=1))*Math.sin((1*t-i)*(2*Math.PI)/e)},easeOutElastic:function(t){var i=1.70158,e=0,a=1;if(0==t)return 0;if(1==(t/=1))return 1;if(e||(e=.3),a<Math.abs(1)){a=1;var i=e/4}else var i=e/(2*Math.PI)*Math.asin(1/a);return a*Math.pow(2,-10*t)*Math.sin((1*t-i)*(2*Math.PI)/e)+1},easeInOutElastic:function(t){var i=1.70158,e=0,a=1;if(0==t)return 0;if(2==(t/=.5))return 1;if(e||(e=.3*1.5*1),a<Math.abs(1)){a=1;var i=e/4}else var i=e/(2*Math.PI)*Math.asin(1/a);return t<1?a*Math.pow(2,10*(t-=1))*Math.sin((1*t-i)*(2*Math.PI)/e)*-.5:a*Math.pow(2,-10*(t-=1))*Math.sin((1*t-i)*(2*Math.PI)/e)*.5+1},easeInBack:function(t){var i=1.70158;return 1*(t/=1)*t*((i+1)*t-i)},easeOutBack:function(t){var i=1.70158;return 1*((t=t/1-1)*t*((i+1)*t+i)+1)},easeInOutBack:function(t){var i=1.70158;return(t/=.5)<1?t*t*((1+(i*=1.525))*t-i)*.5:.5*((t-=2)*t*((1+(i*=1.525))*t+i)+2)},easeInBounce:function(t){return 1-i.animationOptions.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t*1:t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*i.animationOptions.easeInBounce(2*t):.5*i.animationOptions.easeOutBounce(2*t-1)+.5}},requestAnimFrame:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isEqual:function(t,i,e){return e=void 0==e?10:e,t.toFixed(e)===i.toFixed(e)},capValue:function(t,i,e){return this.isNumber(i)&&t>i?i:this.isNumber(e)&&t<e?e:t},getDecimalPlaces:function(t){return t%1!=0?t.toString().split(".")[1].length:0},extend:function(t){function i(t,e){for(var a in e){var n=e[a];n instanceof Array?t[a]=i([],n):n instanceof Object?t[a]=i({},n):t[a]=n}return t}var e=Array.prototype.slice.call(arguments,1);return this.each(e,function(e,a){i(t,e)}),t},clone:function(t){var i;if("object"==typeof t)if(null===t)i=null;else if(t instanceof Array){i=[];for(var e=0,a=t.length;e<a;e++)i.push(this.clone(t[e]))}else{i={};for(var n in t)i[n]=this.clone(t[n])}else i=t;return i},each:function(t,i,e){for(var a=0,n=t.length;a<n;a++){var s=i.call(e,t[a],a,t);if(!0!==s&&!1===s)break}},getOffset:function(t){var i=t.getBoundingClientRect(),e=t.ownerDocument,a=e.body,n=e.documentElement,s=n.clientTop||a.clientTop||0,o=n.clientLeft||a.clientLeft||0;return{top:i.top+(self.pageYOffset||n.scrollTop||a.scrollTop)-s,left:i.left+(self.pageXOffset||n.scrollLeft||a.scrollLeft)-o}},hex2Rgb:function(t,i){var e,a,n;if(/rgb/.test(t)){var s=t.match(/\d+/g);e=parseInt(s[0]),a=parseInt(s[1]),n=parseInt(s[2])}else{if(!/#/.test(t))return t;var o=t.length;7===o?(e=parseInt(t.slice(1,3),16),a=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5),16)):4===o&&(e=parseInt(t.charAt(1)+val.charAt(1),16),a=parseInt(t.charAt(2)+val.charAt(2),16),n=parseInt(t.charAt(3)+val.charAt(3),16))}return"rgba("+e+","+a+","+n+","+(i||1)+")"},tmpl:function(){function t(e,a){var n=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[e]=i[e]||t(document.getElementById(e).innerHTML);return a?n(a):n}var i={};return t}()};if(function(t){function i(i,e){function a(t,i,e){var a=n(t,i);a&&o.trigger(e,[o.chartData.datasets[a[5]].data[a[4]],a[4],a[5]])}function n(i,e){var a;return t.each(s,function(t){if(i>=t[0]&&i<=t[1]&&e>=t[3]&&e<=t[2])return a=t,!1}),a}t.Scale.apply(this);var s=[];this._type_="bar";var o=this;this.data=i,this.chartData=null,t.extend(this.config,{showBarBorder:!0,barBorderWidth:2,barSpacing:1,barSetSpacing:5,datasetGesture:!1,datasetShowNumber:12}),this.bindEvents=function(){this.on("_tap",function(t,i){a(t,i,"tap.bar")}),this.on("_longTap",function(t,i){a(t,i,"longTap.bar")}),this.config.datasetGesture&&this.bindDataGestureEvent()},this.draw=function(t){this.config.datasetGesture&&this.data.labels.length>o.config.datasetShowNumber?this.chartData=this.sliceData(this.data,0,this.data.labels.length,this.config.datasetShowNumber):this.chartData=this.data,this.mergeFont(["scaleFont","textFont"]),this.initScale(!0),t?(this.drawScale(),this.drawBars(1)):this.doAnim(this.drawScale,this.drawBars)},this.redraw=function(t){this.chartData=t,this.clear(),this.initScale(!0),this.drawScale(),this.drawBars(1)},this.drawBars=function(i){i>=1&&(s=[]);var e=o.ctx,a=o.config,n=o.scaleData;t.each(o.chartData.datasets,function(r,h){a.showBarBorder||(borderColor=null),t.each(r.data,function(c,l){var u,f=n.x+a.barSetSpacing+n.xHop*l+n.barWidth*h+a.barSpacing*h+a.barBorderWidth*h,d=n.y,g=n.barWidth,p=i*o.calcOffset(c,n.yScaleValue,n.yHop)+a.barBorderWidth/2,x=r.color,v=t.hex2Rgb(x,.6);a.showBarBorder&&(u=r.borderColor||x),e.rect(f,d,g,-p,v,u,a.barBorderWidth),i>=1&&s.push([f,f+g,d,d-p,l,h]),a.showText&&o.drawText(c,f+g/2,d-p-3,[l,h])})})},e&&this.initial(e)}t.Bar=i}(i),function(t){function i(t){function i(){this.el=t="string"==typeof t?document.getElementById(t):t,this.ctx=t.getContext("2d"),this.width=t.width,this.height=t.height,e(this.ctx)}function e(t){for(var e in CanvasRenderingContext2D.prototype)i.prototype[e]||(i.prototype[e]=function(i){return function(){var e=Array.prototype.slice.call(arguments),n=t[i].apply(t,e);return a.indexOf(i)>-1?n:this}}(e))}var a=["isPointInPath","measureText","getImageData","createLinearGradient","createPattern","createRadialGradient","isPointInPath"];return i.prototype={set:function(t,i){if("object"==typeof t)for(var e in t)this.ctx[e]&&(this.ctx[e]=t[e]);else this.ctx[t]&&(this.ctx[t]=i);return this},get:function(t){return this.ctx[t]},fill:function(t){return t&&this.set("fillStyle",t),this.ctx.fill(),this},stroke:function(t,i){return t&&(this.set("strokeStyle",t),i&&this.set("lineWidth",i)),this.ctx.stroke(),this},fillText:function(t,i,e,a){if(this.ctx.save(),a&&"object"==typeof a)for(var n in a)this.set(n,a[n]);var s=(t+"").split("\n");if(s.length>1)for(var o=this.getFontSize(),r=0;r<s.length;r++)this.ctx.fillText(s[r],i,e+r*o);else this.ctx.fillText(t,i,e);return this.ctx.restore(),this},clear:function(t,i,e,a){var n=this.el;return t=t||0,i=i||0,e=e||this.el.width,a=a||this.el.height,this.ctx.clearRect(t,i,e,a),n.style.opacity=.99,setTimeout(function(){n.style.opacity=1},1),this},resize:function(t,i){return this.el.width=t,this.el.height=i,this.width=t,this.height=i,this},line:function(t,i,e,a,n,s){return this.beginPath().moveTo(t,i).lineTo(e,a),n&&this.stroke(n,s),this},rect:function(t,i,e,a,n,s,o){return this.ctx.beginPath(),this.ctx.rect(t,i,e,a),this.ctx.closePath(),n&&this.fill(n),s&&this.stroke(s,o),this},circle:function(t,i,e,a,n,s){return this.beginPath(),this.ctx.arc(t,i,e,0,2*Math.PI,!1),this.closePath(),a&&this.fill(a),n&&this.stroke(n,s),this},sector:function(t,i,e,a,n,s,o,r){return this.beginPath().arc(t,i,e,a,n,!1).lineTo(t,i).closePath(),s&&this.fill(s),o&&this.stroke(o,r),this},dountSector:function(t,i,e,a,n,s,o,r,h){return this.beginPath().arc(t,i,a,n,s,!1).arc(t,i,e,s,n,!0).closePath(),o&&this.fill(o),r&&this.stroke(r,h),this},image:function(t){var i=this,e=Array.prototype.slice.call(arguments),a=function(){i.ctx.drawImage.apply(i.ctx,e)};return"string"==typeof t?(e[0]=new Image,e[0].onload=a,e[0].src=t):a(),this},getFontSize:function(){var t=this.ctx.font.match(/\d+(?=px)/i);return t&&(t=parseInt(t[0])),t}},new i}t.Canvas=i}(i||window),function(t){var i=function(){this.isAnimating=!1,this.config={width:0,height:0,bgColor:"#fff",drawScaleFirst:!0,showText:!0,textFont:{},animation:!0,animationSteps:60,animationEasing:"easeOutBounce"},this.defaultFont={family:"Arial",size:16,style:"normal",color:"#5b5b5b",textAlign:"center",textBaseline:"middle"},this.events={},this.initial=function(i){"string"==typeof i?this.config.id=i:t.extend(this.config,i),this.ctx=t.Canvas(this.config.id);var e=this.ctx.el;this.config.width&&(e.width=this.config.width),this.config.height&&(e.height=this.config.height),this.config.fit,this.width=e.width,this.height=e.height,e.style.background=this.config.bgColor,window.devicePixelRatio&&(e.style.width=this.width+"px",e.style.height=this.height+"px",e.height=this.height*window.devicePixelRatio,e.width=this.width*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)),this.bindTouchEvents(),this.bindEvents()},this.resize=function(t,i){},this.clear=function(){this.ctx.clear()},this.refresh=function(t){this.update(null,t,!0)},this.load=function(t){this.update(t,null,!1)},this.update=function(i,e,a){e&&t.extend(this.config,e),i&&(this.data=i),this.dataOffset=0,this.clear(),this.draw(!a)},this.mergeFont=function(i){if(i instanceof Array)t.each(i,function(t){this.mergeFont(t)},this);else{var e=this.config[i],a=t.extend({},this.defaultFont,e);a.font=a.style+" "+a.size+"px "+a.family,a.fillStyle=a.color,this.config[i]=a}},this.doAnim=function(i,e,a){function n(){l+=h,s(),l<=1?t.requestAnimFrame.call(window,n):(r.isAnimating=!1,a&&a.call(r),r.trigger("animationComplete"))}function s(){r.clear();var a=o.animation?t.capValue(c(l),1,0):1;e.call(r,a),r.config.drawScaleFirst?(i.call(r),e.call(r,a)):(e.call(r,a),i.call(r))}this.isAnimating=!0;var o=this.config,r=this,h=o.animation?1/t.capValue(o.animationSteps,1e3,1):1,c=t.animationOptions[o.animationEasing],l=o.animation?0:1,r=this;"function"!=typeof i&&(i=function(){}),t.requestAnimFrame.call(window,n)},this.on=function(t,i){this.events[t]=i},this.trigger=function(t,i){var e=this.events[t];return e?e.apply(this,i):null},this.drawText=function(t,i,e,a,n){this.ctx.set(this.config.textFont),n&&this.ctx.set(n),a=a?[t].concat(a):[t];var s=this.trigger("renderText",a);s=null==s?t:s,this.ctx.fillText(s,i,e)},this.bindTouchEvents=function(){function i(i){c=Date.now(),i=i.touches?i.touches[0]:i,l=c-(f.last||c),r&&clearTimeout(r),u=t.getOffset(b.ctx.el),f.x1=i.pageX-u.left,f.y1=i.pageY-u.top,l>0&&l<=250&&(f.isDoubleTap=!0),f.last=c,h=setTimeout(n,d)}function e(t){if(f.last){var i=t.touches?t.touches[0]:t;f.x2=i.pageX-u.left,f.y2=i.pageY-u.top,Math.abs(f.x1-f.x2)>15&&(t.preventDefault(),o())}}function a(t){s(),"last"in f&&(b.trigger("_tap",[f.x1,f.y1]),b.trigger("tap",[f.x1,f.y1]),f.isDoubleTap?(o(),b.trigger("_doubleTap",[f.x1,f.y1]),b.trigger("doubleTap",[f.x1,f.y1])):r=setTimeout(function(){r=null,b.trigger("_singleTap",[f.x1,f.y1]),b.trigger("singleTap",[f.x1,f.y1]),f={}},250))}function n(){h=null,f.last&&(b.trigger("_longTap",[f.x1,f.y1]),b.trigger("longTap",[f.x1,f.y1]),f={})}function s(){h&&clearTimeout(h),h=null}function o(){r&&clearTimeout(r),h&&clearTimeout(h),r=h=null,f={}}var r,h,c,l,u,f={},d=750,g="ontouchstart"in window,p=g?"touchstart":"mousedown",x=g?"touchmove":"mousemove",v=g?"touchend":"mouseup",w=g?"touchcancel":"mouseup",b=this;this.ctx.el.addEventListener(p,i),this.ctx.el.addEventListener(x,e),this.ctx.el.addEventListener(v,a),this.ctx.el.addEventListener(w,o)}};t.Chart=i}(i),function(t){function i(i,e){function a(t,i){var e=n(t,i);e&&o.trigger("tap.point",[o.chartData.datasets[e[3]].data[e[2]],e[2],e[3]])}function n(i,e){var a,n=o.config.pointClickBounds;return t.each(s,function(t){if(i>=t[0]-n&&i<=t[0]+n&&e>=t[1]-n&&e<=t[1]+n)return a=t,!1}),a}t.Scale.apply(this);var s=[];this._type_="line",this.data=i,this.chartData=null;var o=this;t.extend(this.config,{smooth:!0,showPoint:!0,pointRadius:4,pointBorderWidth:2,pointClickBounds:20,lineWidth:2,fill:!0,datasetGesture:!1,datasetShowNumber:12}),this.bindEvents=function(){this.on("_tap",a),this.config.datasetGesture&&this.bindDataGestureEvent()},this.draw=function(t){this.mergeFont(["textFont","scaleFont"]),this.config.datasetGesture&&this.data.labels.length>o.config.datasetShowNumber?this.chartData=this.sliceData(this.data,0,this.data.labels.length,this.config.datasetShowNumber):this.chartData=this.data,o.initScale(!0),t?(this.drawScale(),this.drawLines(1)):this.doAnim(this.drawScale,this.drawLines)},this.redraw=function(t){this.chartData=t,this.clear(),this.initScale(!0),this.drawScale(),this.drawLines(1)},this.drawLines=function(i){function e(t,e){return c.y-i*o.calcOffset(h[t].data[e],c.yScaleValue,c.yHop)}function a(t){return c.x+c.xHop*t}i>=1&&(s=[]);var n=o.ctx,r=o.config,h=o.chartData.datasets,c=o.scaleData;t.each(h,function(h,l){n.beginPath().moveTo(c.x,e(l,0)),t.each(h.data,function(t,o){var h=a(o),c=e(l,o);r.smooth?n.bezierCurveTo(a(o-.5),e(l,o-1),a(o-.5),c,h,c):n.lineTo(h,c),i>=1&&s.push([h,c,o,l])}),n.stroke(h.color,r.lineWidth),r.fill?n.lineTo(c.x+c.xHop*(h.data.length-1),c.y).lineTo(c.x,c.y).closePath().fill(h.fillColor?h.fillColor:t.hex2Rgb(h.color,.6)):n.closePath(),t.each(h.data,function(t,i){var n=a(i),s=e(l,i);r.showPoint&&o.drawPoint(n,s,h),r.showText&&o.drawText(t,n,s-3,[i,l])})})},e&&this.initial(e)}t.Line=i}(i),function(t){function i(i,e){function a(){var i=0;d=[],t.each(g.data,function(t,e){var a=i,n=t.value/x;i+=n*g.config.totalAngle;var s=i;d.push([a,s,t,e,n])})}function n(t){s(t,"rotate")}function s(i,e){g.clear(),i=g.config.animation?i:1,t.each(d,function(t){r(t,i,e)}),g.config.isDount&&g.config.dountText&&c()}function o(t,i,e){var a=t[0],n=t[1];return"rotate"==e?(a=a+v+w*i,n=n+v+w*i):(a=a*i+v,n=n*i+v),{start:a,end:n}}function r(t,i,e){var a=m.x,n=m.y,s=g.config,r=t[3],c=o(t,i,e);if(r==b){var l=(t[0]+t[1])/2+v;a+=Math.cos(l)*s.pullOutDistance,n+=Math.sin(l)*s.pullOutDistance}s.isDount?g.ctx.dountSector(a,n,p*s.dountRadiusPercent,p,c.start,c.end,g.data[r].color):g.ctx.sector(a,n,p,c.start,c.end,g.data[r].color),s.showBorder&&g.ctx.stroke(s.borderColor,s.borderWidth),s.showText&&h(a,n,p,c.start,c.end,t)}function h(t,i,e,a,n,s){var o=(a+n)/2,r=e/2,h=s[4],c=s[2];g.config.isDount&&(r=e/2+e*g.config.dountRadiusPercent/2),h=(100*h).toFixed(1)+"%";var l=Math.cos(o)*r+t,u=Math.sin(o)*r+i;g.drawText(h,l,u,[c,s[3],s[4]])}function c(){g.ctx.fillText(g.config.dountText,m.x,m.y,g.config.dountFont)}function l(t,i,e){var a=g.config.clickType,n=u(t,i);if(n)if("tap.pie"==e){if(!g.trigger(e,[n[2],n[3]]))return;"rotate"==a?g.rotate(n[3]):"pullOut"==a&&g.toggleSegment(n[3])}else g.trigger(a,[n[2],n[3]])}function u(i,e){var a,n=i-m.x,s=e-m.y,o=Math.sqrt(Math.pow(Math.abs(n),2)+Math.pow(Math.abs(s),2)),r=o<=p;if(r&&g.config.isDount&&(r=o>=p*g.config.dountRadiusPercent),r){var h=Math.atan2(s,n)-v;return h<0&&(h+=2*Math.PI),h>2*Math.PI&&(h-=2*Math.PI),t.each(d,function(t){if(h>=t[0]&&h<t[1])return a=t,!1}),a}}function f(){g.config.totalAngle==Math.PI?(m={x:g.width/2,y:g.height-20},p=Math.min(m.x,m.y)-10):(m={x:g.width/2,y:g.height/2},p=Math.min(m.x,m.y)-10)}t.Chart.apply(this);var d,g=this;this.data=i;var p,x=0,v=0,w=0,b=-1,m={};t.extend(this.config,{showBorder:!0,borderColor:"#fff",borderWidth:2,startAngle:-Math.PI/2,rotateAngle:Math.PI/2,pullOutDistance:10,clickType:"pullOut",isDount:!1,dountRadiusPercent:.4,totalAngle:2*Math.PI,dountText:"",dountFont:{size:20,style:600,color:"#3498DB"}}),this.bindEvents=function(){this.on("_tap",function(t,i){l(t,i,"tap.pie")}),this.on("_longTap",function(t,i){l(t,i,"longTap.pie")}),this.on("tap.pie",function(){return!0})},this.toggleSegment=function(t){t==b?this.pushIn():this.pullOut(t)},this.pushIn=function(){b=-1,s(1),this.trigger("pushIn")},this.pullOut=function(t){b!=t&&(b=t,s(1),this.trigger("pullOut",[g.data[t],t,d[t][4]]))},this.rotate=function(i){if(!g.isAnimating){var e=(d[i][0]+d[i][1])/2+v,a=g.config.rotateAngle-e;t.isEqual(a,0)||(this.pushIn(),w=a,this.doAnim(null,n,function(){v+=w,g.trigger("rotate",[g.data[i],i,d[i][4]])}))}},this.setDountText=function(t){g.config.dountText=t,s(1)},this.draw=function(i){this.mergeFont(["textFont","dountFont"]),f(),x=0,b=-1,t.each(g.data,function(t){x+=t.value}),a(),v=g.config.startAngle,i?s(1):this.doAnim(null,s)},e&&this.initial(e)}t.Pie=i}(i),function(t){function i(i,e){function a(t,i){var e=n(t,i);e>-1&&this.trigger("tap.pie",[this.data[e],e])}function n(t,i){var e=-Math.PI/2,a=2*Math.PI/this.data.length,t=t-s.width/2,i=i-s.height/2;if(!(Math.sqrt(Math.pow(Math.abs(t),2)+Math.pow(Math.abs(i),2))<=s.scaleData.yHeight))return-1;var n=Math.atan2(i,t)-e;return n<0&&(n=2*Math.PI+n),n>2*Math.PI&&(n-=2*Math.PI),Math.floor(n/a)}t.Scale.apply(this);var s=this;this.data=this.chartData=i,t.extend(this.config,{drawScaleFirst:!1,showScaleLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,showAngleLine:!0,angleLineColor:"rgba(0,0,0,.1)",showBorder:!0,borderColor:"#fff",borderWidth:1,textFont:{size:16,color:"#666",textBaseline:"middle"},angleLineWidth:1,animateRotate:!0,animateScale:!1}),this.bindEvents=function(){this.on("_tap",a)},this.draw=function(t){this.mergeFont(["scaleFont","textFont"]),this.initScale(),t&&(this.drawAllSegments(1),this.drawScale()),this.doAnim(this.drawScale,this.drawAllSegments)},this.calcDrawingSizes=function(){var t=Math.min(this.width,this.height)/2,i=this.config,e=i.scaleFont.size,a=2*e;t-=Math.max(.5*e,.5*i.scaleLineWidth),i.showScaleLabelBackdrop&&(a+=2*i.scaleBackdropPaddingY,t-=1.5*i.scaleBackdropPaddingY),this.scaleData.yHeight=t-10,this.scaleData.yLabelHeight=a},this.drawScale=function(){var i=this.config,e=this.scaleData,a=this.width/2,n=this.height/2;size=i.scaleFont.size,px=i.scaleBackdropPaddingX,py=i.scaleBackdropPaddingY,this.ctx.save().translate(a,n);for(var s=0;s<e.yScaleValue.step;s++){var o=e.yHop*(s+1);if(i.showGridLine&&this.ctx.circle(0,0,o,!1,i.gridLineColor,i.gridLineWidth),i.showScaleLabel){var r=e.yScaleValue.labels[s];if(i.showScaleLabelBackdrop){var h=this.ctx.measureText(r).width;this.ctx.rect(Math.round(-h/2-px),Math.round(-o-size/2-py),Math.round(h+2*px),Math.round(size+2*py),i.scaleBackdropColor)}this.ctx.fillText(r,0,-o,i.scaleFont)}}var c=this.data.labels.length,l=2*Math.PI/c;this.ctx.rotate(-Math.PI/2-l),t.each(this.data.labels,function(t,a){this.ctx.rotate(l),i.showAngleLine&&this.ctx.line(0,0,e.yHeight,0,i.angleLineColor,i.angleLineWidth),i.showLabel&&(this.ctx.save().translate(e.yHeight+10,0).rotate(Math.PI/2-l*a),this.ctx.fillText(t,0,0,i.textFont),this.ctx.restore())},this),this.ctx.restore()},this.drawAllSegments=function(i){var e,a,n=-Math.PI/2,s=2*Math.PI/this.data.datasets.length,o=1,r=1,h=this.scaleData,c=this.config;c.animation&&(c.animateScale&&(o=i),c.animateRotate&&(r=i)),c.showBorder&&(e=c.borderColor,a=c.borderWidth),t.each(this.data.datasets,function(i){var c=o*this.calcOffset(i.value,h.yScaleValue,h.yHop);this.ctx.sector(this.width/2,this.height/2,c,n,n+r*s,t.hex2Rgb(i.color,.6),e,a),n+=r*s},this)},this.getValueBounds=function(t){for(var i=Number.MIN_VALUE,e=Number.MAX_VALUE,a=0;a<t.length;a++)t[a].value>i&&(i=t[a].value),t[a].value<e&&(e=t[a].value);var n=this.scaleData.yHeight,s=this.scaleData.yLabelHeight;return{maxValue:i,minValue:e,maxSteps:Math.floor(n/(.66*s)),minSteps:Math.floor(n/s*.5)}},e&&this.initial(e)}t.Polar=i}(i),function(t){function i(i,e){function a(t,i){var e=s(t,i);e&&r.trigger("tap.point",[r.data.datasets[e[3]].data[e[2]],e[2],e[3]])}function n(){t.each(o,function(t){var i=t[1];i>r.height/2&&(i+=6),r.drawText(r.data.datasets[t[3]].data[t[2]],t[0],i,[t[2],t[3]])})}function s(i,e){var a,n=r.config.pointClickBounds;return t.each(o,function(t){if(i>=t[0]-n&&i<=t[0]+n&&e>=t[1]-n&&e<=t[1]+n)return a=t,!1}),a}t.Scale.apply(this);var o=[],r=this;this.data=this.chartData=i,t.extend(this.config,{drawScaleFirst:!1,scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,graphShape:"circle",showAngleLine:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,showPoint:!0,pointRadius:3,pointBorderWidth:1,pointClickBounds:20,lineWidth:2,fill:!0,showScaleLabel:!0,showText:!1,gridLineColor:"rgb(0,0,0,.5)"}),this.bindEvents=function(){this.on("_tap",a)},this.draw=function(t){this.mergeFont(["scaleFont","textFont"]),this.initScale(),t?(this.drawAllDataPoints(1),this.drawScale()):this.doAnim(this.drawScale,this.drawAllDataPoints)},this.calcDrawingSizes=function(){var i=Math.min(this.width,this.height)/2,e=this.config,a=2*e.scaleFont.size,n=0;t.each(r.data.labels,function(t){this.ctx.set(e.textFont);var i=this.ctx.measureText(t).width;i>n&&(n=i)},this),i-=Math.max(n,e.textFont.size/2*1.5),i-=e.textFont.size,i=t.capValue(i,null,0),this.scaleData.yHeight=i,this.scaleData.yLabelHeight=a},this.drawScale=function(){var t=this.ctx,i=this.config,e=this.scaleData,a=i.scaleFont.size,n=i.textFont.size,s=this.data.labels.length,o=i.scaleBackdropPaddingX,r=i.scaleBackdropPaddingY,h=2*Math.PI/s;if(t.save().translate(this.width/2,this.height/2),i.showAngleLine)for(var c=e.yHeight-e.yHeight%e.yHop,l=0;l<s;l++)t.rotate(h).line(0,0,0,-c,i.angleLineColor,i.angleLineWidth);for(var u=0;u<e.yScaleValue.step;u++){var f=e.yHop*(u+1);if(t.beginPath(),i.showGridLine){if(t.set({strokeStyle:i.gridLineColor,lineWidth:i.gridLineWidth}),"diamond"==i.graphShape){t.moveTo(0,-f);for(var d=0;d<s;d++)t.rotate(h).lineTo(0,-f)}else t.circle(0,0,f);t.closePath().stroke()}if(i.showScaleLabel){var g=e.yScaleValue.labels[u];if(i.showScaleLabelBackdrop){var p=this.ctx.measureText(g).width;this.ctx.rect(Math.round(-p/2-o),Math.round(-f-a/2-r),Math.round(p+2*o),Math.round(a+2*r),i.scaleBackdropColor)}this.ctx.fillText(g,0,-f,i.scaleFont)}}this.ctx.set(i.textFont);for(var x=0;x<s;x++){var v,w=Math.sin(h*x)*(e.yHeight+n),b=Math.cos(h*x)*(e.yHeight+n);v=h*x==Math.PI||h*x==0?"center":h*x>Math.PI?"right":"left",this.ctx.fillText(this.data.labels[x],w,-b,{textAlign:v})}t.restore()},this.drawAllDataPoints=function(e){function a(t){return-e*r.calcOffset(t,l.yScaleValue,l.yHop)}function s(t,i){t=Math.abs(t);var e,a,n=-Math.PI/2+i*c;return e=Math.cos(n)*t+r.width/2,a=Math.sin(n)*t+r.height/2,[e,a]}e>=1&&(o=[]);var h=i.datasets[0].data.length,c=2*Math.PI/h,l=this.scaleData,u=this.ctx,f=this.config;u.save().translate(this.width/2,this.height/2),t.each(this.data.datasets,function(i,n){u.beginPath().moveTo(0,a(i.data[0])),t.each(i.data,function(t,i){if(0==i)return!0;u.rotate(c).lineTo(0,a(t))}),u.closePath(),f.fill&&u.fill(i.fillColor||t.hex2Rgb(i.color,.6)),u.stroke(i.color,f.lineWidth),t.each(i.data,function(t,r){var h=a(t);if(f.showPoint&&u.rotate(c).circle(0,h,f.pointRadius,i.pointColor,i.pointBorderColor,f.pointBorderWidth),e>=1){var l=s(h,r);o.push([l[0],l[1],r,n])}}),u.rotate(c)},this),u.restore(),f.showText&&n()},e&&this.initial(e)}t.Radar=i}(i),function(t){function i(){t.Chart.apply(this),t.extend(this.config,{scale:null,scaleLineColor:"rgba(0,0,0,.3)",scaleLineWidth:1,showScaleLabel:!0,showLabel:!0,scaleFont:{size:12,color:"#666"},textFont:{size:14,textBaseline:"bottom"},showGridLine:!0,gridLineColor:"rgba(0,0,0,.1)",gridLineWidth:1,horizonLine:null}),this.dataOffset=0,this.scaleData={x:0,y:0,xHop:0,yHop:0,xLength:0,yHeight:0,yLabelHeight:0,yScaleValue:null,labelRotate:0,xLabelWidth:0,xLabelHeight:0,barWidth:0},this.calcDrawingSizes=function(){var i=this.height,e=0,a=this.config.scaleFont.size,n=0,s=a,o=0,r=this.chartData.labels.length;this.ctx.set(this.config.scaleFont),t.each(this.chartData.labels,function(t){var i=this.ctx.measureText(t).width;e=i>e?i:e},this),n=e,this.width/r<e&&(o=45,n=Math.cos(o*Math.PI/180)*e,s=Math.sin(o*Math.PI/180)*e,this.width/r<s&&(o=90,n=a,s=e)),i-=s,i-=10,i-=5,i-=this.config.showText?a:0,this.scaleData.yHeight=i,this.scaleData.yLabelHeight=a,this.scaleData.labelRotate=o,this.scaleData.xLabelWidth=n,this.scaleData.xLabelHeight=s},this.getValueBounds=function(i){var e=Number.MIN_VALUE,a=Number.MAX_VALUE;t.each(i,function(i){t.each(i.data,function(t){t>e&&(e=t),t<a&&(a=t)})});var n=this.scaleData.yHeight,s=this.scaleData.yLabelHeight,o=Math.floor(n/(.66*s)),r=Math.floor(n/s*.5);return{maxValue:e,minValue:a,maxSteps:o,minSteps:r}},this.calcYAxis=function(){var t=this.config.scale;if(t)t.start=t.start||0,t.labels=this.populateLabels(t.step,t.start,t.stepValue);else{var i=this.getValueBounds(this.chartData.datasets);t=this.calcScale(this.scaleData.yHeight,i.maxSteps,i.minSteps,i.maxValue,i.minValue)}this.scaleData.yScaleValue=t,this.scaleData.yHop=Math.floor(this.scaleData.yHeight/t.step)},this.calcXAxis=function(){var i,e,a=this.config,n=this.scaleData,s=0;if(a.showScaleLabel&&(t.each(n.yScaleValue.labels,function(t){var i=this.ctx.measureText(t).width;s=i>s?i:s},this),s+=20),i=this.width-s-5-(this.config.showText?this.config.textFont.size:0),"bar"==this._type_){e=Math.floor(i/this.chartData.labels.length);var o=this.chartData.datasets.length;n.barWidth=(e-2*a.gridLineWidth-2*a.barSetSpacing-(a.barSpacing*o-1)-(a.barBorderWidth/2*o-1))/o}else e=Math.floor(i/(this.chartData.labels.length-1));n.x=s,n.y=this.height-n.xLabelHeight-10,n.xWidth=i,n.xHop=e},this.drawScale=function(){var i,e=this.ctx,a=this.config,n=this.scaleData;e.set({strokeStyle:a.scaleLineColor,lineWidth:a.scaleLineWidth}),e.line(n.x-3,n.y,n.x+n.xWidth,n.y,!0),e.line(n.x,n.y+3,n.x,n.y-n.yHeight,!0),n.labelRotate>0?(e.save(),i="right"):i="center",e.set({fillStyle:a.scaleFont.color,textAlign:i,textBaseline:"hanging",strokeStyle:a.gridLineColor,lineWidth:a.gridLineWidth}),t.each(this.chartData.labels,function(t,i){e.save();var s=n.x+i*n.xHop,o=n.y+5,r="bar"==this._type_?s+n.xHop/2:s;if(n.labelRotate>0?e.translate(r,o).rotate(-n.labelRotate*(Math.PI/180)).fillText(t,0,0).restore():e.fillText(t,r,o),a.showGridLine){var h="bar"==this._type_?s+n.xHop:s;e.line(h,n.y,h,n.y-n.yHeight,!0)}},this),e.set({textAlign:"right",textBaseline:"middle"});for(var s=0;s<n.yScaleValue.step;s++){var o=n.y-(s+1)*n.yHop;a.showGridLine&&e.line(n.x,o,n.x+n.xWidth,o,!0),a.showScaleLabel&&e.fillText(n.yScaleValue.labels[s],n.x-10,o)}if(a.horizonLine){var o=n.y-this.calcOffset(a.horizonLine.value,n.yScaleValue,n.yHop);e.line(n.x,o,n.x+n.xWidth,o,a.horizonLine.color||"#E74C3C",a.horizonLine.width||1)}},this.initScale=function(t){this.calcDrawingSizes(),this.calcYAxis(),t&&this.calcXAxis()},this.drawPoint=function(t,i,e){this.ctx.beginPath().circle(t,i,this.config.pointRadius,e.pointColor||"#fff",e.pointBorderColor||e.color,this.config.pointBorderWidth)},this.calcScale=function(t,i,e,a,n){var s,o,r,h,c,l,u;for(l=a-n,u=function(t){return Math.floor(Math.log(t)/Math.LN10)}(l),s=0,o=Math.ceil(a/(1*Math.pow(10,u)))*Math.pow(10,u),r=o-s,h=Math.pow(10,u),c=Math.round(r/h);c<e||c>i;)c<e?(h/=2,c=Math.round(r/h)):(h*=2,c=Math.round(r/h));return{step:c,stepValue:h,start:s,labels:this.populateLabels(c,s,h)}},this.populateLabels=function(i,e,a){for(var n=[],s=1;s<i+1;s++)if(this.config.showScaleLabel){var o=(e+a*s).toFixed(t.getDecimalPlaces(a)),r=this.trigger("renderYLabel",[o]);r=r||o,n.push(r)}else n.push("");return n},this.calcOffset=function(i,e,a){var n=e.step*e.stepValue,s=i-e.start,o=t.capValue(s/n,1,0);return a*e.step*o},this.sliceData=function(i,e,a,n){var s=t.clone(i),o=e,r=e+n;return r>a&&(o=a-n,r=a),s.labels=s.labels.slice(o,r),t.each(s.datasets,function(t){t.data=t.data.slice(o,r)}),s},this.bindDataGestureEvent=function(){function t(t){t=t.touches?t.touches[0]:t,n={x:t.pageX,y:t.pageY},a=0,s=!0}function i(t){if(s&&o.config.datasetGesture){t=t.touches?t.touches[0]:t;var i=t.pageX;t.pageY;a=i-n.x;var e=o.data.labels.length,c=o.dataOffset-Math.floor(a/o.scaleData.xHop);c<0||c==r||c+h>e||(r=c,console.log(c),setTimeout(function(){o.redraw(o.sliceData(o.data,c,e,h))},0))}}function e(t){s=!1,o.dataOffset=r}var a,n,s,o=this,r=0,h=this.config.datasetShowNumber,c="ontouchstart"in window,l=c?"touchstart":"mousedown",u=c?"touchmove":"mousemove",f=c?"touchend":"mouseup";this.ctx.el.addEventListener(l,t),this.ctx.el.addEventListener(u,i),this.ctx.el.addEventListener(f,e)}}t.Scale=i}(i),"function"==typeof define&&define.amd)define(function(){return i});else if("undefined"!=typeof module&&module.exports)module.exports=i;else{var e=t.JChart;i.noConflict=function(){return t.JChart=e,i},t.JChart=i}}).call(this);